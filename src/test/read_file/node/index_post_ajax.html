<html>
<body>
<h3>文件上传：</h3>
选择一个文件上传: <br />
<input type="file" id="file" name="file" size="50" 
onchange="getPath()" />
<!-- <form action="http://127.0.0.1:8081/process_post" method="POST"> -->
<input type="text" id="filePath" name="filePath"><br />
<input type="submit" value="Submit" onclick="filePathPost()">
<!-- </form> -->
<div id="res_scan">wait...</div>
<div id="res_spec">wait...</div>
</body>
</html>


<script>
	function getPath() {
		var filename = document.getElementById('file').value;
		document.getElementById('filePath').value = filename.substr(12, filename.length - 12);
	}
    function filePathPost(){
        var xhr=new XMLHttpRequest();
        xhr.open("POST","http://127.0.0.1:8081/file_path_post",true);
        xhr.onreadystatechange=function(){
            if(xhr.readyState==4){
                if(xhr.status==200){
                    document.getElementById("res_scan").innerHTML=xhr.responseText;
                    console.log(xhr.responseText);
                }
            }
        }
        xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
        console.log("filePath="+document.getElementById("filePath").value);
        xhr.send("filePath="+document.getElementById("filePath").value);
        scanPost();
    }
    function scanPost(){
        var xhr=new XMLHttpRequest();
        xhr.open("POST","http://127.0.0.1:8081/scan_post",true);
        xhr.onreadystatechange=function(){
            if(xhr.readyState==4){
                if(xhr.status==200){
                    document.getElementById("res_spec").innerHTML=xhr.responseText;
                    console.log(xhr.responseText);	
            	}
            }
        }
        xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
        console.log("filePath="+document.getElementById("filePath").value);
        xhr.send("filePath="+document.getElementById("filePath").value);
    }
</script>